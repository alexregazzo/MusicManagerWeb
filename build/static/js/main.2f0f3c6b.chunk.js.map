{"version":3,"sources":["context/auth.js","pages/dashboard/index.js","pages/login/index.js","pages/signup/index.js","App.js","index.js"],"names":["AuthContext","createContext","AuthProvider","children","useState","userId","setUserId","Provider","value","signedIn","Dashboard","useContext","formUsername","setFormUsername","formPassword","setFormPassword","isConnected","setIsConnected","connectSpotifyUrl","setConnectSpotifyUrl","useEffect","fetch","method","then","r","ok","json","data","console","log","href","type","onChange","e","target","onClick","body","JSON","stringify","username","password","Login","Signup","App","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sMAEMA,EAAcC,0BAEPC,EAAe,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAC7B,EAA4BC,mBAAS,MAArC,mBAAOC,EAAP,KAAeC,EAAf,KAGA,OAAO,cAACN,EAAYO,SAAb,CAAsBC,MAAO,CAAEC,WAAYJ,EAAQC,YAAWD,UAA9D,SAAyEF,KAGnEH,IC6FAU,MApGf,WACE,MAAwCC,qBAAWX,GAA3CS,EAAR,EAAQA,SAAUJ,EAAlB,EAAkBA,OAAQC,EAA1B,EAA0BA,UAC1B,EAAwCF,mBAAS,IAAjD,mBAAOQ,EAAP,KAAqBC,EAArB,KACA,EAAwCT,mBAAS,IAAjD,mBAAOU,EAAP,KAAqBC,EAArB,KACA,EAAsCX,mBAAS,MAA/C,mBAAOY,EAAP,KAAoBC,EAApB,KACA,EAAkDb,mBAAS,MAA3D,mBAAOc,EAAP,KAA0BC,EAA1B,KA2DA,OAzDAC,qBAEA,WACE,IAAKf,EAAQ,OACbgB,MAAM,kCAAD,OAAmChB,GAAU,CAChDiB,OAAQ,QAEPC,MAAK,SAACC,GACL,OAAIA,EAAEC,GACGD,EAAEE,OAEJ,MAERH,MAAK,SAACI,GACLV,EAAeU,EAAI,cACnBR,EAAqBQ,EAAI,mBAfD,CAACtB,IAyD3BI,GAEFmB,QAAQC,IAAIxB,GAEV,gCAEoB,OAAhBW,IAAyBA,GACzB,mBAAGc,KAAMZ,EAAT,iCAGF,wCAAWb,SAMb,8BACE,iCACE,kDACA,8CACA,uBAAO0B,KAAK,OAAOC,SAAU,SAACC,GAAD,OAAOpB,EAAgBoB,EAAEC,OAAO1B,UAC7D,8CACA,uBAAOuB,KAAK,WAAWC,SAAU,SAACC,GAAD,OAAOlB,EAAgBkB,EAAEC,OAAO1B,UAEjE,wBAAQuB,KAAK,SAASI,QA9D9B,WACEd,MAAM,yBAA0B,CAC9BC,OAAQ,OACRc,KAAMC,KAAKC,UAAU,CACnBC,SAAU3B,EACV4B,SAAU1B,MAGXS,MAAK,SAACC,GACL,OAAIA,EAAEC,GACGD,EAAEE,OAEJ,MAERH,MAAK,SAACI,GACLrB,EAAUqB,EAAI,YA+CZ,uBAGA,wBAAQI,KAAK,SAASI,QA/C9B,WACEd,MAAM,wBAAyB,CAC7BC,OAAQ,OACRc,KAAMC,KAAKC,UAAU,CACnBC,SAAU3B,EACV4B,SAAU1B,MAGXS,MAAK,SAACC,GACL,OAAIA,EAAEC,GACGD,EAAEE,OAEJ,MAERH,MAAK,SAACI,GACLC,QAAQC,IAAIF,GACZrB,EAAUqB,EAAI,YA+BZ,0BCzFKc,MAJf,WACE,OAAO,0CCGMC,MAJf,WACE,OAAO,0CCeMC,MAZf,WACE,OACE,cAAC,EAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,UAAWpC,IACjC,cAAC,IAAD,CAAOkC,OAAK,EAACC,KAAK,UAAUC,UAAWJ,IACvC,cAAC,IAAD,CAAOE,OAAK,EAACC,KAAK,SAASC,UAAWL,UCR9CM,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.2f0f3c6b.chunk.js","sourcesContent":["import React, { createContext, useState } from \"react\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [userId, setUserId] = useState(null);\r\n  // const [username, setUsername] = useState(null);\r\n\r\n  return <AuthContext.Provider value={{ signedIn: !!userId, setUserId, userId }}>{children}</AuthContext.Provider>;\r\n};\r\n\r\nexport default AuthContext;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\n\r\nimport AuthContext from \"../../context/auth\";\r\n\r\nfunction Dashboard() {\r\n  const { signedIn, userId, setUserId } = useContext(AuthContext);\r\n  const [formUsername, setFormUsername] = useState(\"\");\r\n  const [formPassword, setFormPassword] = useState(\"\");\r\n  const [isConnected, setIsConnected] = useState(null);\r\n  const [connectSpotifyUrl, setConnectSpotifyUrl] = useState(null);\r\n\r\n  useEffect(isconnectedSpotify, [userId]);\r\n\r\n  function isconnectedSpotify() {\r\n    if (!userId) return;\r\n    fetch(`/api/v0/spotify/isconnected?id=${userId}`, {\r\n      method: \"GET\",\r\n    })\r\n      .then((r) => {\r\n        if (r.ok) {\r\n          return r.json();\r\n        }\r\n        return {};\r\n      })\r\n      .then((data) => {\r\n        setIsConnected(data[\"is_connected\"]);\r\n        setConnectSpotifyUrl(data[\"connect_link\"]);\r\n      });\r\n  }\r\n\r\n  function cadastrar() {\r\n    fetch(\"/api/v0/account/signup\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        username: formUsername,\r\n        password: formPassword,\r\n      }),\r\n    })\r\n      .then((r) => {\r\n        if (r.ok) {\r\n          return r.json();\r\n        }\r\n        return {};\r\n      })\r\n      .then((data) => {\r\n        setUserId(data[\"use_id\"]);\r\n      });\r\n  }\r\n  function entrar() {\r\n    fetch(\"/api/v0/account/login\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        username: formUsername,\r\n        password: formPassword,\r\n      }),\r\n    })\r\n      .then((r) => {\r\n        if (r.ok) {\r\n          return r.json();\r\n        }\r\n        return {};\r\n      })\r\n      .then((data) => {\r\n        console.log(data);\r\n        setUserId(data[\"use_id\"]);\r\n      });\r\n  }\r\n\r\n  if (signedIn) {\r\n    // Signed in\r\n    console.log(userId);\r\n    return (\r\n      <div>\r\n        {\r\n          isConnected !== null && !isConnected && \r\n          <a href={connectSpotifyUrl}>Conectar ao Spotify</a>\r\n        \r\n        }\r\n        <h2>Teste {userId}</h2>\r\n      </div>\r\n    );\r\n  } else {\r\n    // Not signed in\r\n    return (\r\n      <div>\r\n        <form>\r\n          <h3>Entrar/Cadastrar</h3>\r\n          <label>Username:</label>\r\n          <input type=\"text\" onChange={(e) => setFormUsername(e.target.value)} />\r\n          <label>Password:</label>\r\n          <input type=\"password\" onChange={(e) => setFormPassword(e.target.value)} />\r\n\r\n          <button type=\"button\" onClick={cadastrar}>\r\n            Cadastrar\r\n          </button>\r\n          <button type=\"button\" onClick={entrar}>\r\n            Entrar\r\n          </button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Dashboard;\r\n","import React from \"react\";\r\n\r\nfunction Login() {\r\n  return <h2>Testing</h2>;\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\n\r\nfunction Signup() {\r\n  return <h2>Testing</h2>;\r\n}\r\n\r\nexport default Signup;\r\n","import { BrowserRouter, Route } from \"react-router-dom\";\nimport { AuthProvider } from \"./context/auth\";\nimport Dashboard from \"./pages/dashboard\";\nimport Login from \"./pages/login\";\nimport Signup from \"./pages/signup\";\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <BrowserRouter>\n        <Route exact path=\"/\" component={Dashboard} />\n        <Route exact path=\"/signup\" component={Signup} />\n        <Route exact path=\"/login\" component={Login} />\n      </BrowserRouter>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}